


{% block conteudo %}
<div id="section" class="conteiner">
	{% if user %}
	
	

		
		
	{% endif %}
	<br><br>
	{% for post in posts %}
	<div class="publicacoes">
	<hr>
		<div>
		{%if user %}
				
				
			{% if user.id == post.user.id %}
			<span class="" onclick="$('.editar-{{post.id}}-post').toggle()">. . .</span><br>
			<div  style="display:none;" class="editar-{{post.id}}-post">
				<a class="btn btn-outline-warning" href="/editar/post/{{post.id}}/">Editar</a>
				<a class="btn btn-outline-danger" href="/excluir/post/{{post.id}}/">excluir</a>
			</div>
			{% endif %}
					

				
				
		{% endif %}
		</div>
			
			
			
		<div>
			<h3>
				<a href="/{{post.user.id}}/{{post.user.nome.split()[0].lower()}}/">
				{% if post.user.img %}
					<img class="miniatura" src="data:;base64,{{post.user.img}}">
				{% endif %}
				{{post.user.nome.split()[0]}}
				</a>
			</h3>
			<sup>
				{{post.data.day }}/{{post.data.month }}/{{post.data.year }} às {{post.data.hour }}:{{post.data.minute }}
			</sup><br>
			<pre><i style="max-width:50%;">{{post.body}}</i></pre>
		</div>
			
			
			
		<div class="carousel slide" data-ride="carousel">
		 	<div class="carousel-inner">
			{% for img in post.imgs[post.id]%}
				{% if img %}
					{% if img == post.imgs[post.id][0]%}
				 		<div class="carousel-item active">
							<img class="d-block w-100" src="data:;base64,{{img}}">
						</div>
					{% else %}
				 		<div class="carousel-item">
							<img class="d-block w-100"  src="data:;base64,{{img}}">
						</div>
					{% endif %}
				{% endif %}
			{% endfor %}
			</div>
		</div>
			
		{%if user %}
		<div>
			{% if post.Liked %}
			<br>
				<a class="btn btn-primary" href="/post/unlike/{{post.id}}/">
					{% if post.reactLen < 2 %}
						{{post.reactLen}} like
					{% else %}
						{{post.reactLen}} likes 
					{% endif %}
				</a>
			{% else %}
			<br>
				<a class="btn btn-outline-primary" href="/post/like/{{post.id}}/">
				{% if post.reactLen < 2 %}
					{{post.reactLen}} like
				{% else %}
					{{post.reactLen}} likes 
				{% endif %}
				</a>
			{% endif %}
			<span  onclick="$('#comentario-{{post.id}}').toggle()">
				{% if post.commLen > 0 %}
					{{post.commLen}}
					{% if post.commLen  < 2 %} 
						Comentário
					{% else %}
						Comentários
					{% endif %}
				{% endif%}
			</span>
		</div>
		{% else %}
		<br>
			<span class="btn btn-dark">
				{% if post.reactLen < 2 %}
					{{post.reactLen}} like
				{% else %}
					{{post.reactLen}} likes 
				{% endif %}
			</span>
			<span  onclick="$('#comentario-{{post.id}}').toggle()">
				{% if post.commLen == 0 %}
					Nenhum
				{% else %}
					{{post.commLen}}
				{% endif%}
				{% if post.commLen  < 2 %}
					Comentário
				{% else %} 
					Comentários 
				{% endif %}
			</span>
		{% endif %}
			
				<br>
			
		{% if post.comm %}
		<div id="comentario-{{post.id}}" class="publicacoes" style="display:none;">
			<hr>
			{% for comm in post.comm %}
			<div class="conteiner publicacoes bg-info">
				<a href="/{{comm.user.id}}/{{comm.user.nome.split()[0]}}/">
					<b>{%if comm.user.img %}<img class="miniatura" src="data:;base64,{{ comm.user.img }}">{%endif%}
					{{ comm.user.nome}}
				</a>
				{% if comm.user.id == post.id_user %}
					<sup>autor</sup>
				{% endif %}
				
				
				{% if user %}
					{% if user.id == comm.user.id %}
					<span onclick="$('.editar-{{comm.id}}-comm').toggle()">...</span><br>
					<div  style="display:none;" class="editar-{{comm.id}}-comm">
						<a class="btn btn-outline-warning" href="/editar/comm/{{comm.id}}/">Editar</a>
						<a class="btn btn-outline-danger" href="/excluir/comm/{{comm.id}}/">excluir</a>
					</div>
					{% endif %}
				{% endif %}
				
				</b>
				<pre><i>{{comm.body}}</i></pre>
				{% if comm.img %}
				<div>
					<img src="data:;base64,{{comm.img}}">
				</div>
				{% endif %}
				<div>
					{% if comm.reacs %}
						<br>
						{% if comm.Liked %}
							<a class="btn btn-primary" href="/comentario/unlike/{{comm.id}}/">
								
								{% if comm.reactLen < 2 %}
									{{ comm.reactLen}} like
								{% else %}
									{{ comm.reactLen}} likes 
								{% endif %}
								
							</a>
						{% else %}
							<a class="btn btn-outline-primary" href="/comentario/like/{{comm.id}}/">
						
								{% if comm.reactLen < 2%}
									{{ comm.reactLen}} like
								{% else %}
									{{ comm.reactLen}} likes 
								{% endif %}
							</a>
						{% endif %}
					{% else %}
						<a class="btn btn-outline-primary" href="/comentario/like/{{comm.id}}/">
					
							{% if comm.reactLen < 2%}
								{{ comm.reactLen}} like
							{% else %}
								{{ comm.reactLen}} likes 
							{% endif %}
						</a>
					{% endif %}
				</div>
			</div>
			{% endfor %}
			<hr>
		</div>
		{% endif%}
			
			
			
		{% if user %}
		<form action="/comentario/post/{{post.id}}/" enctype="multipart/form-data" method="post">
			<textarea  type="text" name="body" class="form-control" placeholder="comentario"></textarea><br>
			<label class="btn btn-dark" for="input-file-{{post.id}}">Imagem</label>
			<input id="input-file-{{post.id}}" name="img" type="file" accept="Image/*" style="display:none;">
			<button type="submit" class="form-control btn btn-primary">Comentar</button>
		</form>
		{% endif %}
			
	</div>
	<hr>
	{% endfor %}
	
</div>
{% endblock conteudo %}